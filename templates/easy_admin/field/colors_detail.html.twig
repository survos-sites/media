{% set c = field.value ?? {} %}
{% if c %}
  <div style="display:grid;grid-template-columns: 160px 1fr;gap:.5rem;align-items:center">
    <div>
      <div style="font-size:.8rem;color:#666">Dominant</div>
      <div title="{{ c.dominant|default(null) ? '#' ~ '%06X'|format(c.dominant) : '' }}"
           style="width:48px;height:48px;border-radius:6px;border:1px solid #ddd;background:
           {{ c.dominant|default(null)
               ? '#' ~ '%06X'|format(c.dominant)
               : 'repeating-linear-gradient(45deg,#f8f8f8,#f8f8f8 10px,#eee 10px,#eee 20px)'
           }}">
      </div>
    </div>

    <div>
      <div style="font-size:.8rem;color:#666">Top palette</div>
      <div style="display:flex;gap:6px;flex-wrap:wrap">
        {% for rgb in (c.palette ?? [])|slice(0,12) %}
          {% set hex = '#' ~ '%06X'|format(rgb) %}
          <div title="{{ hex }}" style="width:24px;height:24px;border-radius:4px;border:1px solid #ddd;background: {{ hex }}"></div>
        {% endfor %}
      </div>
    </div>

    <div style="grid-column: 1 / -1">
      <div style="font-size:.8rem;color:#666;margin:.25rem 0">Distribution</div>
      <div style="display:flex;gap:6px;flex-wrap:wrap;align-items:flex-end">
        {% for d in (c.dist ?? [])|slice(0,24) %}
          <div style="display:flex;flex-direction:column;align-items:center">
            <div title="{{ d.hex ~ ' â€¢ ' ~ (d.ratio*100)|number_format(1) ~ '%' }}"
                 style="width:18px;height:{{ (30 + 60*(d.ratio|default(0)))|round(0,'ceil') }}px;border-radius:4px;border:1px solid #ddd;background: {{ d.hex }}"></div>
          </div>
        {% endfor %}
      </div>
    </div>

    {% if c.hueBuckets is defined %}
      <div style="grid-column: 1 / -1;font-size:.8rem;color:#666">
        Hue buckets: {{ c.hueBuckets|join(', ') }}
      </div>
    {% endif %}
  </div>
{% else %}
  <span class="badge badge-secondary">No colors</span>
{% endif %}
